<!DOCTYPE html>
<html lang="en" th:fragment="layout(pageTitleKey, content, activePage)"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{${pageTitleKey}} + ' - ' + #{app.title.suffix}">MMS Admin</title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}"/>
</head>

<body class="bg-gray-100">
<div class="flex h-screen">
    <!-- Sidebar -->
    <div class="w-64 bg-white shadow-md">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-indigo-600">MMS Admin</h1>
        </div>
        <nav class="mt-6">
            <!-- (Menu Dashboard) -->
            <a class="block px-6 py-3 text-gray-700 hover:bg-gray-100"
               th:classappend="${activePage == 'dashboard'} ? 'bg-gray-200' : ''"
               th:href="@{/admin/dashboard}"
               th:text="#{layout.sidebar.dashboard}">
                Dashboard
            </a>

            <a class="block px-6 py-3 text-gray-700 hover:bg-gray-100"
               th:classappend="${activePage == 'positions'} ? 'bg-gray-200' : ''"
               th:href="@{/admin/positions}"
               th:text="#{layout.sidebar.positions}">
                Positions Management
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header -->
        <header class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <div class="text-sm">
                    <a class="text-indigo-600 hover:text-indigo-800" th:href="@{?(lang=en)}">EN</a>
                    <span class="mx-1">|</span>
                    <a class="text-indigo-600 hover:text-indigo-800" th:href="@{?(lang=vi)}">VI</a>
                </div>
                <div class="flex items-center">
                    <span class="mr-4"><th:block th:text="#{layout.header.welcome}">Welcome,</th:block> <strong
                            sec:authentication="name">Admin</strong>!</span>
                    <form class="inline" method="POST" th:action="@{/admin/logout}">
                        <button class="text-indigo-600 hover:text-indigo-800" th:text="#{layout.header.logout}"
                                type="submit">Logout
                        </button>
                    </form>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
            <div class="container mx-auto">
                <div class="mb-4 p-4 bg-green-100 text-green-700 rounded-md" th:if="${successMessageKey}">
                    <p th:text="#{${successMessageKey}}"></p>
                </div>
                <div class="mb-4 p-4 bg-red-100 text-red-700 rounded-md" th:if="${errorMessageKey}">
                    <p th:text="#{${errorMessageKey}}"></p>
                </div>
                <div th:replace="${content}"></div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
